const event = {
	Records: [{
		body:
		'{\n "Type" : "Notification",\n "MessageId" : "16111bd9-f80f-586c-9700-4e70c7098085",\n "TopicArn" : "arn:aws:sns:eu-west-1:333239165417:submit-approval",\n "Subject" : "Amazon SES Email Receipt Notification",\n "Message" : "{\\"notificationType\\":\\"Received\\",\\"mail\\":{\\"timestamp\\":\\"2019-07-17T15:20:37.742Z\\",\\"source\\":\\"richard.tu@ft.com\\",\\"messageId\\":\\"39h0riq5p20esl7725m5158p5j6pq4is501p7b81\\",\\"destination\\":[\\"submit-approval@ft-timesheets.io\\"],\\"headersTruncated\\":false,\\"headers\\":[{\\"name\\":\\"Return-Path\\",\\"value\\":\\"<richard.tu@ft.com>\\"},{\\"name\\":\\"Received\\",\\"value\\":\\"from mail-qk1-f200.google.com (mail-qk1-f200.google.com [209.85.222.200]) by inbound-smtp.eu-west-1.amazonaws.com with SMTP id 39h0riq5p20esl7725m5158p5j6pq4is501p7b81 for submit-approval@ft-timesheets.io; Wed, 17 Jul 2019 15:20:37 +0000 (UTC)\\"},{\\"name\\":\\"X-SES-Spam-Verdict\\",\\"value\\":\\"PASS\\"},{\\"name\\":\\"X-SES-Virus-Verdict\\",\\"value\\":\\"PASS\\"},{\\"name\\":\\"Received-SPF\\",\\"value\\":\\"pass (spfCheck: domain of ft.com designates 209.85.222.200 as permitted sender) client-ip=209.85.222.200; envelope-from=richard.tu@ft.com; helo=mail-qk1-f200.google.com;\\"},{\\"name\\":\\"Authentication-Results\\",\\"value\\":\\"amazonses.com; spf=pass (spfCheck: domain of ft.com designates 209.85.222.200 as permitted sender) client-ip=209.85.222.200; envelope-from=richard.tu@ft.com; helo=mail-qk1-f200.google.com; dkim=pass header.i=@ft.com; dmarc=pass header.from=ft.com;\\"},{\\"name\\":\\"X-SES-RECEIPT\\",\\"value\\":\\"AEFBQUFBQUFBQUFGQ3pVTnAwNnZtU045TkZQZzV5aGJDVUZUUmkraU5DWVFUV2RvMmk3eVpBNkpsNnlhOUlRS1NCZTVZU0hvcXp2ZEJGS3N2bm9UZTBkeEJ2SXNTZmExNVM2RUpQV1BxbTFSSzdOWUpJbWgzY0dVQVRxZDd0UEgwVnN0VVU1VldXWW1ma0Vpc1FKZm0xYkNtOGhYWE42bGxrMHlIa2NDcTNOS05HSkprbHlsOGF5MDA2Tjdua2hmQWxzV2pwT2dsY2pvcWQvZ2FwTHlGK3hTM0ZNVTh1YnVtN2ZCWlZwaWZtZ2ovajZsMFJIeGt4OFluM21SZjJaNlR4SFIxSHFkczZJL0xsc3NPM1ZOWmZ1SGZKV3ZSMTFFN1JFTkdCVXN2UE90cUVpVmVOSEExcWc9PQ==\\"},{\\"name\\":\\"X-SES-DKIM-SIGNATURE\\",\\"value\\":\\"a=rsa-sha256; q=dns/txt; b=cuVEuqp3S33vs19WQ4vSJCROF0GILLBi8mm7dSpJNMufdMOpaNnHMexKrGrY71slVFaYlQ9ZEhJIVeW036sG34cAGyRPMxpffp8Gvb/E+Ftlsgt+QpC0BoGdc7GvPn5acVjY4rIcX81Ygn17otrG5f9yHARMOJQCQkacUEaED0E=; c=relaxed/simple; s=ihchhvubuqgjsxyuhssfvqohv7z3u4hn; d=amazonses.com; t=1563376838; v=1; bh=yChh1hdvPT2HcaKYys81yTtqWRMxoe0UEbnAaE0xySU=; h=From:To:Cc:Bcc:Subject:Date:Message-ID:MIME-Version:Content-Type:X-SES-RECEIPT;\\"},{\\"name\\":\\"Received\\",\\"value\\":\\"by mail-qk1-f200.google.com with SMTP id d11so20407962qkb.20 for <submit-approval@ft-timesheets.io>; Wed, 17 Jul 2019 08:20:37 -0700 (PDT)\\"},{\\"name\\":\\"DKIM-Signature\\",\\"value\\":\\"v=1; a=rsa-sha256; c=relaxed/relaxed; d=ft.com; s=google; h=mime-version:message-id:date:subject:from:to:content-transfer-encoding; bh=yChh1hdvPT2HcaKYys81yTtqWRMxoe0UEbnAaE0xySU=; b=RvMuHUne71FM/dnqswAAsfwvLNXOg1ojoBXnqZYijoK60ygIqYCfH5BI2e9G3X8+CPF63DAAgybURxHcf6N/ygwRCawGalTe/X+YGLYIxSwJh66Hg3c2jwjdu2KEg26gmdrMqX0stVcy2XDhquhuUA2U28BGtn2//whmdous1io=\\"},{\\"name\\":\\"X-Google-DKIM-Signature\\",\\"value\\":\\"v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20161025; h=x-gm-message-state:mime-version:message-id:date:subject:from:to :content-transfer-encoding; bh=yChh1hdvPT2HcaKYys81yTtqWRMxoe0UEbnAaE0xySU=; b=XiFmbldyYWHvS5+l25mr/Pf8JCfSNBRlWMl0gwsS6N1reOZ4EfwfGSXuXNsoAOFIXf CYy1dhuOcj/5YdA7Xj9eN1LEjD8hlEmk/YYQgITEZFby7nbYVB7gjFPQO8C6vCcZS8yv Dn0zWMAKPzN1iSbqgC9zU6R4MKZE9vErFwAG1xTHHyNI1EA4ukDP+YCpJoPcw9piHr/k vSwTS0p7oLsyfZpBgVifieWIwPSXiT4xCKR3BcSuhvS45VuZWgrQoOdQyz+TgOqVnWh1 /LWjjHq8cm+HKEtc6P0S2S9B/DjXFz7LSbIWGXbpU1hnuHT74SthzAxveWTQIWVHQ9Bu pRRw==\\"},{\\"name\\":\\"X-Gm-Message-State\\",\\"value\\":\\"APjAAAXdGmMg+2HHr1N56DjyUtsQBNumNphGAaqg0uwpkt5kOFDcTpbm fOgxrSOAz31O2LH8EX3ysMd0ON3qdXmt5cD4dW3YRgUE6AMTIq8ICCz7p4wzKbCLP9dMRuhxl82 qpwghe5II0Fj3h2CtqerepWmNlrpD\\"},{\\"name\\":\\"X-Google-Smtp-Source\\",\\"value\\":\\"APXvYqyMYamrHJPlQGeARBn+/r2F6vQCuqWejZ+6aS8sH5RK4KiR/JQq23DAssehcB5Q7lOfRpqtPzLOGQ==\\"},{\\"name\\":\\"MIME-Version\\",\\"value\\":\\"1.0\\"},{\\"name\\":\\"X-Received\\",\\"value\\":\\"by 2002:a05:6214:1312:: with SMTP id a18mr29027237qvv.241.1563376836244; Wed, 17 Jul 2019 08:20:36 -0700 (PDT)\\"},{\\"name\\":\\"Message-ID\\",\\"value\\":\\"<000000000000f9b29f058de2087e@google.com>\\"},{\\"name\\":\\"Date\\",\\"value\\":\\"Wed, 17 Jul 2019 15:20:36 +0000\\"},{\\"name\\":\\"Subject\\",\\"value\\":\\"Approval\\"},{\\"name\\":\\"From\\",\\"value\\":\\"richard.tu@ft.com\\"},{\\"name\\":\\"To\\",\\"value\\":\\"submit-approval@ft-timesheets.io\\"},{\\"name\\":\\"Content-Type\\",\\"value\\":\\"text/plain; charset=\\\\\\"UTF-8\\\\\\"; format=flowed; delsp=yes\\"},{\\"name\\":\\"Content-Transfer-Encoding\\",\\"value\\":\\"quoted-printable\\"}],\\"commonHeaders\\":{\\"returnPath\\":\\"richard.tu@ft.com\\",\\"from\\":[\\"richard.tu@ft.com\\"],\\"date\\":\\"Wed, 17 Jul 2019 15:20:36 +0000\\",\\"to\\":[\\"submit-approval@ft-timesheets.io\\"],\\"messageId\\":\\"<000000000000f9b29f058de2087e@google.com>\\",\\"subject\\":\\"Approval\\"}},\\"receipt\\":{\\"timestamp\\":\\"2019-07-17T15:20:37.742Z\\",\\"processingTimeMillis\\":584,\\"recipients\\":[\\"submit-approval@ft-timesheets.io\\"],\\"spamVerdict\\":{\\"status\\":\\"PASS\\"},\\"virusVerdict\\":{\\"status\\":\\"PASS\\"},\\"spfVerdict\\":{\\"status\\":\\"PASS\\"},\\"dkimVerdict\\":{\\"status\\":\\"PASS\\"},\\"dmarcVerdict\\":{\\"status\\":\\"PASS\\"},\\"action\\":{\\"type\\":\\"SNS\\",\\"topicArn\\":\\"arn:aws:sns:eu-west-1:333239165417:submit-approval\\",\\"encoding\\":\\"UTF8\\"}},\\"content\\":\\"Return-Path: <richard.tu@ft.com>\\\\r\\\\nReceived: from mail-qk1-f200.google.com (mail-qk1-f200.google.com [209.85.222.200])\\\\r\\\\n by inbound-smtp.eu-west-1.amazonaws.com with SMTP id 39h0riq5p20esl7725m5158p5j6pq4is501p7b81\\\\r\\\\n for submit-approval@ft-timesheets.io;\\\\r\\\\n Wed, 17 Jul 2019 15:20:37 +0000 (UTC)\\\\r\\\\nX-SES-Spam-Verdict: PASS\\\\r\\\\nX-SES-Virus-Verdict: PASS\\\\r\\\\nReceived-SPF: pass (spfCheck: domain of ft.com designates 209.85.222.200 as permitted sender) client-ip=209.85.222.200; envelope-from=richard.tu@ft.com; helo=mail-qk1-f200.google.com;\\\\r\\\\nAuthentication-Results: amazonses.com;\\\\r\\\\n spf=pass (spfCheck: domain of ft.com designates 209.85.222.200 as permitted sender) client-ip=209.85.222.200; envelope-from=richard.tu@ft.com; helo=mail-qk1-f200.google.com;\\\\r\\\\n dkim=pass header.i=@ft.com;\\\\r\\\\n dmarc=pass header.from=ft.com;\\\\r\\\\nX-SES-RECEIPT: AEFBQUFBQUFBQUFGQ3pVTnAwNnZtU045TkZQZzV5aGJDVUZUUmkraU5DWVFUV2RvMmk3eVpBNkpsNnlhOUlRS1NCZTVZU0hvcXp2ZEJGS3N2bm9UZTBkeEJ2SXNTZmExNVM2RUpQV1BxbTFSSzdOWUpJbWgzY0dVQVRxZDd0UEgwVnN0VVU1VldXWW1ma0Vpc1FKZm0xYkNtOGhYWE42bGxrMHlIa2NDcTNOS05HSkprbHlsOGF5MDA2Tjdua2hmQWxzV2pwT2dsY2pvcWQvZ2FwTHlGK3hTM0ZNVTh1YnVtN2ZCWlZwaWZtZ2ovajZsMFJIeGt4OFluM21SZjJaNlR4SFIxSHFkczZJL0xsc3NPM1ZOWmZ1SGZKV3ZSMTFFN1JFTkdCVXN2UE90cUVpVmVOSEExcWc9PQ==\\\\r\\\\nX-SES-DKIM-SIGNATURE: a=rsa-sha256; q=dns/txt; b=cuVEuqp3S33vs19WQ4vSJCROF0GILLBi8mm7dSpJNMufdMOpaNnHMexKrGrY71slVFaYlQ9ZEhJIVeW036sG34cAGyRPMxpffp8Gvb/E+Ftlsgt+QpC0BoGdc7GvPn5acVjY4rIcX81Ygn17otrG5f9yHARMOJQCQkacUEaED0E=; c=relaxed/simple; s=ihchhvubuqgjsxyuhssfvqohv7z3u4hn; d=amazonses.com; t=1563376838; v=1; bh=yChh1hdvPT2HcaKYys81yTtqWRMxoe0UEbnAaE0xySU=; h=From:To:Cc:Bcc:Subject:Date:Message-ID:MIME-Version:Content-Type:X-SES-RECEIPT;\\\\r\\\\nReceived: by mail-qk1-f200.google.com with SMTP id d11so20407962qkb.20\\\\r\\\\n for <submit-approval@ft-timesheets.io>; Wed, 17 Jul 2019 08:20:37 -0700 (PDT)\\\\r\\\\nDKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;\\\\r\\\\n d=ft.com; s=google;\\\\r\\\\n h=mime-version:message-id:date:subject:from:to\\\\r\\\\n :content-transfer-encoding;\\\\r\\\\n bh=yChh1hdvPT2HcaKYys81yTtqWRMxoe0UEbnAaE0xySU=;\\\\r\\\\n b=RvMuHUne71FM/dnqswAAsfwvLNXOg1ojoBXnqZYijoK60ygIqYCfH5BI2e9G3X8+CP\\\\r\\\\n F63DAAgybURxHcf6N/ygwRCawGalTe/X+YGLYIxSwJh66Hg3c2jwjdu2KEg26gmdrMqX\\\\r\\\\n 0stVcy2XDhquhuUA2U28BGtn2//whmdous1io=\\\\r\\\\nX-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;\\\\r\\\\n d=1e100.net; s=20161025;\\\\r\\\\n h=x-gm-message-state:mime-version:message-id:date:subject:from:to\\\\r\\\\n :content-transfer-encoding;\\\\r\\\\n bh=yChh1hdvPT2HcaKYys81yTtqWRMxoe0UEbnAaE0xySU=;\\\\r\\\\n b=XiFmbldyYWHvS5+l25mr/Pf8JCfSNBRlWMl0gwsS6N1reOZ4EfwfGSXuXNsoAOFIXf\\\\r\\\\n CYy1dhuOcj/5YdA7Xj9eN1LEjD8hlEmk/YYQgITEZFby7nbYVB7gjFPQO8C6vCcZS8yv\\\\r\\\\n Dn0zWMAKPzN1iSbqgC9zU6R4MKZE9vErFwAG1xTHHyNI1EA4ukDP+YCpJoPcw9piHr/k\\\\r\\\\n vSwTS0p7oLsyfZpBgVifieWIwPSXiT4xCKR3BcSuhvS45VuZWgrQoOdQyz+TgOqVnWh1\\\\r\\\\n /LWjjHq8cm+HKEtc6P0S2S9B/DjXFz7LSbIWGXbpU1hnuHT74SthzAxveWTQIWVHQ9Bu\\\\r\\\\n pRRw==\\\\r\\\\nX-Gm-Message-State: APjAAAXdGmMg+2HHr1N56DjyUtsQBNumNphGAaqg0uwpkt5kOFDcTpbm\\\\r\\\\n\\\\tfOgxrSOAz31O2LH8EX3ysMd0ON3qdXmt5cD4dW3YRgUE6AMTIq8ICCz7p4wzKbCLP9dMRuhxl82\\\\r\\\\n\\\\tqpwghe5II0Fj3h2CtqerepWmNlrpD\\\\r\\\\nX-Google-Smtp-Source: APXvYqyMYamrHJPlQGeARBn+/r2F6vQCuqWejZ+6aS8sH5RK4KiR/JQq23DAssehcB5Q7lOfRpqtPzLOGQ==\\\\r\\\\nMIME-Version: 1.0\\\\r\\\\nX-Received: by 2002:a05:6214:1312:: with SMTP id a18mr29027237qvv.241.1563376836244;\\\\r\\\\n Wed, 17 Jul 2019 08:20:36 -0700 (PDT)\\\\r\\\\nMessage-ID: <000000000000f9b29f058de2087e@google.com>\\\\r\\\\nDate: Wed, 17 Jul 2019 15:20:36 +0000\\\\r\\\\nSubject: Approval\\\\r\\\\nFrom: richard.tu@ft.com\\\\r\\\\nTo: submit-approval@ft-timesheets.io\\\\r\\\\nContent-Type: text/plain; charset=\\\\\\"UTF-8\\\\\\"; format=flowed; delsp=yes\\\\r\\\\nContent-Transfer-Encoding: quoted-printable\\\\r\\\\n\\\\r\\\\n{\\\\\\"emailAddress\\\\\\":\\\\\\"richard.tu@ft.com\\\\\\",\\\\\\"cost\\\\\\":900,\\\\\\"reason\\\\\\":\\\\\\"fun\\\\\\"}\\\\r\\\\n\\\\r\\\\n--=20\\\\r\\\\n\\\\r\\\\n\\\\r\\\\n*This=C2=A0email=C2=A0was\\\\r\\\\nsent by a company owned by Financial Times Group Limited=20\\\\r\\\\n(\\\\\\"FT Group <http://aboutus.ft.com/corporate-information/#axzz3rajCSIAt>\\\\\\"),=\\\\r\\\\n=20\\\\r\\\\nregistered office at Bracken House, One Friday Street, London, EC4M 9BT.=20\\\\r\\\\nRegistered in England and Wales with company\\\\r\\\\nnumber 879531.=C2=A0This e-mail may=20\\\\r\\\\ncontain confidential information. If you\\\\r\\\\nare not the intended recipient,=20\\\\r\\\\nplease notify the sender immediately, delete\\\\r\\\\nall copies and do not=20\\\\r\\\\ndistribute it further.=C2=A0 It=C2=A0could*=C2=A0*also\\\\r\\\\ncontain personal views which are=20\\\\r\\\\nnot necessarily those of the FT Group.=C2=A0\\\\r\\\\nWe may monitor outgoing or incoming=C2=A0\\\\r\\\\nemails=C2=A0as permitted by law.*\\\\r\\\\n\\"}",\n "Timestamp" : "2019-07-17T15:20:38.371Z",\n "SignatureVersion" : "1",\n "Signature" : "ZJe/beMoiq0fRP8ZJfo0z63es/6wmDwQXdQb1JsUfBCo+sGtnNV3v+3A28Lc/bvoO32Qd6mc5zIFuUumcrO3Esb/YFsiXL9wyC+vN6yF0cdydZ7eOjbex+9CyyxIGT/28nNST6ZloZ+bv9kK9nvGUCKaNmS2Tgher00EvnQKj6L0Y0DuAU9MFNfpxdyds2g44pQu9M3Z+FP6nPeib/p/ug+dUAESjONN9/jGQd1+JYCrJoK/zQy078bUIjDleRK4/8d1TnkeZ0OBB8s4GTqrv+DIIs3yf8/usXqGnz3lH/YL+eg64gFRVAMYoeIRYyGXsg62g5EodAqf/oNBE2NKlA==",\n "SigningCertURL" : "https://sns.eu-west-1.amazonaws.com/SimpleNotificationService-6aad65c2f9911b05cd53efda11f913f9.pem",\n "UnsubscribeURL" : "https://sns.eu-west-1.amazonaws.com/?Action=Unsubscribe&SubscriptionArn=arn:aws:sns:eu-west-1:333239165417:submit-approval:d5209884-b6ef-4787-817b-7e603b7b76c5"\n}'
	}]
	
}
const { sendSlackMessage } = require('./src/sendToSlack');
const index = require('./src/index')

// const eventBody = JSON.parse(event.body)
// const content = JSON.parse(eventBody.Message).content;
// const objectString = content.match(/\{([\s\S]*?)\}/g);
// const finalObject = JSON.parse(objectString[0].replace(/(\r\n|\n|\r)/gm, ""));

index.handler(event, {}, null);
// console.log('processing sqs')
// console.log(finalObject)
// console.log(`email is ${finalObject.emailAddress}`)
// console.log(`cost is ${finalObject.cost}`)

// sendSlackMessage(finalObject)

// const mopsaObject = { emailAddress: 'mopsa.piggy@ft.com', cost: 1000, reason: "corn" }
// sendSlackMessage(mopsaObject)